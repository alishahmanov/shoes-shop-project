<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Регистрация — Shoes Shop</title>

    <!-- Подключаем основные стили -->
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/signup.css" />
</head>
<body>
<main class="signup-container">
    <h2>Регистрация</h2>
    <form id="signupForm">
        <label for="newUsername">Логин</label>
        <input type="text" id="newUsername" required placeholder="Введите логин" />

        <label for="newPassword" style="margin-top:15px;">Пароль</label>
        <input type="password" id="newPassword" required placeholder="Введите пароль" />

        <label for="confirmPassword" style="margin-top:15px;">Повторите пароль</label>
        <input type="password" id="confirmPassword" required placeholder="Подтвердите пароль" />

        <button type="submit" class="nav-btn">Зарегистрироваться</button>
    </form>

    <p id="signupError"></p>
    <p>Уже есть аккаунт? <a href="login.html">Войти</a></p>
</main>

<script>
    const form = document.getElementById("signupForm");
    const error = document.getElementById("signupError");

    form.addEventListener("submit", e => {
        e.preventDefault();
        const username = document.getElementById("newUsername").value.trim();
        const password = document.getElementById("newPassword").value.trim();
        const confirm = document.getElementById("confirmPassword").value.trim();

        if (password !== confirm) {
            error.textContent = "Пароли не совпадают";
            error.style.color = "red";
            return;
        }

        const users = JSON.parse(localStorage.getItem("users") || "{}");

        if (users[username]) {
            error.textContent = "Такой пользователь уже существует";
            error.style.color = "red";
            return;
        }

        users[username] = password;
        localStorage.setItem("users", JSON.stringify(users));

        error.textContent = "Регистрация успешна! Перенаправление...";
        error.style.color = "green";

        setTimeout(() => (window.location.href = "login.html"), 1500);
    });
</script>
</body>
</html>
