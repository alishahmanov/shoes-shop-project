/* ===================== Part 2 — Final CSS ===================== */
/* Токены темы */
:root{
    --bg:#ffffff;
    --ink:#1f2328;
    --muted:#6b7280;
    --brand:#ebebeb;
    --shadow:0 6px 20px rgba(34,60,80,.2);
}
/* железобетонно скрывает все элементы с атрибутом hidden */
[hidden] { display: none !important; }

/* База */
body{ background:var(--bg); color:var(--ink); }

/* Видимый фокус для клавиатуры */
:focus-visible{
    outline:3px solid #2563eb;
    outline-offset:3px;
    border-radius:8px;
}

/* Skip-link */
a.skip-link{
    position:absolute !important;
    left:-9999px !important; top:-9999px !important;
}
a.skip-link:focus-visible{
    left:16px !important; top:16px !important; z-index:10000;
    background:#111; color:#fff; padding:10px 14px; border-radius:8px;
}

/* ---------------------- Header / Navbar ---------------------- */
.nav-btn{ width:auto; }
.btn{ width:auto; }                 /* по умолчанию авто */
.cards .card .btn{ width:100%; }    /* на карточках товара — full */
.btn--full{ width:100%; }

/* Тёмная тема — контраст шапки (почта/телефон читаемы) */
.top-header { background:#f1f3f5; color:#202225; }
.top-header a { color:#0f172a; text-decoration:none; font-weight:600; }
.dark-theme .top-header{
    background:#0f151b !important;
    color:#dbe3ec !important;
    border-bottom:1px solid #263240;
}
.dark-theme .top-header a{
    color:#9ecbff !important;
}
.dark-theme .top-header a:hover{
    color:#cfe4ff !important; text-decoration:underline;
}

.dark-theme .navbar{ background:transparent; }
.dark-theme .nav-list{ background:#16202a; border-color:#2b3640; }
.dark-theme .navbar-actions .nav-btn,
.dark-theme .button-create-your-own-design,
.dark-theme .cart{
    background:#18222c; color:#e8ecf1; border-color:#3a4a5a;
}

/* ---------------------- Banner / Cards ---------------------- */
.dark-theme .banner{ background:#12161b; border-color:#27313b; }
.dark-theme .card{
    background:#11161b; border:1px solid #263240; box-shadow:none;
}
.dark-theme .btn{ background:#10161c; color:#e8ecf1; border-color:#334353; }

/* ---------------------- FAQ (аккордеон) ----------------------
   Центрируем и задаём комфортную ширину */
.faq .container{ display:flex; justify-content:center; padding:0 16px; }
.faq .accordion{ max-width:860px; width:100%; margin:0 auto; }

/* Если нет обёртки .faq — всё равно центрируем */
.accordion{ max-width:860px; margin:20px auto 0; border-radius:8px; }
.accordion-item{
    margin-bottom:10px;
    border:1px solid #e5e7eb;
    border-radius:12px;
    overflow:hidden;
    background:#fff;
    box-shadow:0 6px 16px rgba(2,6,23,.05);
}
.accordion-header{
    width:100%;
    background:#f8f9fb;
    border:0; outline:0;
    text-align:left;
    padding:14px 16px;
    font-weight:600;
    font-family:"Montserrat", sans-serif;
    cursor:pointer;
    transition:background .25s;
}
.accordion-header.active{ background:#eef2f6; }
.accordion-content{
    padding:15px 16px;
    background:#fff;
    border-top:1px solid #e5e7eb;
}
.accordion-content[hidden]{ display:none; }

.dark-theme .accordion-item{
    background:#0f151b; border-color:#27313b; box-shadow:none;
}
.dark-theme .accordion-header{ background:#12161b; }
.dark-theme .accordion-header.active{ background:#141c24; }
.dark-theme .accordion-content{ background:#0f151b; border-color:#27313b; }

/* ---------------------- Popup / Modal ---------------------- */
.popup{
    display:none; position:fixed; inset:0;
    background:rgba(0,0,0,.6);
    justify-content:center; align-items:center; z-index:1000;
}
.popup-content{
    position:relative;
    background:#fff; color:#111;
    padding:24px; border-radius:16px;
    width:min(420px,92vw); box-shadow:var(--shadow);
}
.close-btn{
    position:absolute; top:10px; right:16px;
    font-size:24px; background:transparent; border:0; cursor:pointer;
}
.dark-theme .popup-content{
    background:#11161b; color:#e8ecf1; border:1px solid #263240;
}

/* ---------------------- Toasts ---------------------- */
#toast-container{
    position:fixed; top:20px; right:20px; z-index:999999;
    display:flex; flex-direction:column; gap:12px; max-width:380px;
}
.toast{
    padding:12px 14px; border-radius:10px; color:#fff; box-shadow:var(--shadow);
    background:#0b5ed7;
}
.toast-success{ background:#0f5132; }
.toast-info{ background:#0b5ed7; }
.toast-error{ background:#842029; }
.toast-content{ display:flex; gap:10px; align-items:center; justify-content:space-between; }
.toast-close{ background:transparent; border:0; color:#fff; font-size:20px; cursor:pointer; }
.toast-hide{ opacity:0; transition:opacity .3s; }
.toast-show{ opacity:1; transition:opacity .2s; }

.dark-theme #toast-container .toast{
    background:rgba(15,23,36,.95); color:#e6eef8; border:1px solid rgba(255,255,255,.06);
}

/* ---------------------- Lazy images ---------------------- */
.lazy-image{ opacity:0; transition:opacity .4s ease; }
.lazy-image.loaded{ opacity:1; }

/* ---------------------- «Нам доверяют» ---------------------- */
.stats{ margin:24px 0 8px; }
.stats .container{ max-width:860px; margin:0 auto; padding:0 16px; }
.stats__grid{
    display:grid;
    grid-template-columns:repeat(3, minmax(220px,1fr));
    gap:18px;
}
.stat{
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    min-height:120px; padding:18px;
    background:#fff; border:1px solid #e9eef3; border-radius:16px;
    box-shadow:0 6px 18px rgba(2,6,23,.06); text-align:center;
}
.stat .counter{
    font-size:40px; line-height:1; font-weight:800; letter-spacing:.5px; color:#111827;
}
.stat p{ margin:8px 0 0; font-size:14px; color:#6b7280; }

.dark-theme .stat{
    background:#11161b; border-color:#263240; box-shadow:none;
}
.dark-theme .stat .counter{ color:#e6eef8; }
.dark-theme .stat p{ color:#9aa4af; }

/* ---------------------- Footer ---------------------- */
.dark-theme .footer{ background:#11161b; color:#e8ecf1; }

/* ---------------------- Reduced motion ---------------------- */
@media (prefers-reduced-motion:reduce){
    *{
        animation-duration:.001ms !important;
        animation-iteration-count:1 !important;
        transition-duration:.001ms !important;
        scroll-behavior:auto !important;
    }
}

/* ---------------------- Responsive polish ---------------------- */
@media (max-width: 900px){
    .stats__grid{ grid-template-columns:1fr 1fr; }
}
@media (max-width: 560px){
    .stats__grid{ grid-template-columns:1fr; }
    .faq .accordion{ max-width:100%; }
}


/* ---- Catalog polish ---- */
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;}

.search-bar{ display:flex; align-items:center; gap:10px; }
.search-bar #searchInput{
    flex:1; padding:12px 14px; border:1px solid #e5e7eb; border-radius:10px;
}
.search-bar #clearSearch{ height:42px; }

#suggestions{
    position:absolute; margin-top:52px; list-style:none; padding:8px; background:#fff;
    border:1px solid #e5e7eb; border-radius:12px; width:min(520px, 90vw);
    box-shadow:0 10px 24px rgba(2,6,23,.08); display:none; z-index:50;
}
#suggestions li{ padding:8px 10px; border-radius:8px; cursor:pointer; }
#suggestions li:hover, #suggestions li:focus{ background:#f3f4f6; outline:0; }

/* чтобы список был под инпутом */
.search-bar{ position:relative; }

/* карточки в каталоге чуть ровнее */
.cards-for-index .card{ display:flex; flex-direction:column; gap:12px; align-items:center; }
.cards-for-index .card img{ height:220px; object-fit:contain; }

/* dark theme для выпадашки */
.dark-theme #suggestions{ background:#0f1724; border-color:#263240; }
.dark-theme #suggestions li{ color:#e6eef8; }
.dark-theme #suggestions li:hover, .dark-theme #suggestions li:focus{ background:#111a2a; }


/* ===== Category page hard-fix (drop-in) ===== */

/* 1) Грид карточек — всегда как сетка, без “склейки” в одну колонку */
.page .cards{
    display:grid !important;
    grid-template-columns:repeat(auto-fill, minmax(280px, 1fr)) !important;
    gap:24px !important;
    width:100%;
    align-items:start;
}

/* 2) Нормализация карточки */
.page .card{
    display:flex;
    flex-direction:column;
    border-radius:12px;
    overflow:hidden;
}

/* 3) Контейнер для картинки — квадрат/вариант 4:3 (выбери один) */
.page .card__media{
    position:relative;
    width:100%;
    aspect-ratio: 4 / 3;            /* можно поменять на 1/1, если нужен квадрат */
    background:#fafafa;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
}

/* 4) Картинка внутри — без инлайновых размеров, не вылезает */
.page .card__media img{
    max-width:100% !important;
    width:100% !important;          /* перекрываем инлайн width=310px и т.п. */
    height:100% !important;
    object-fit:contain !important;
    display:block;
}

/* 5) Текст/кнопка — аккуратно сверху/снизу, не “тянут” карточку */
.page .card__title{ margin:10px 0 4px; font-size:16px; font-weight:600; }
.page .card__meta{ margin:0 0 10px; }
.page .card .btn{ margin-top:auto; }

